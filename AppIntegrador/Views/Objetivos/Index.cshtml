@model IEnumerable<AppIntegrador.Models.Objetivo>

@{
    ViewBag.Title = "Index";
}


<div class="fullWidth">
    <h2>Objetivos</h2>

    @if (Model.Count() == 0)
    {
        <div class="centeredText">
            <p>
                Aún no se han creado objetivos
            </p>
        </div>
    }
    else
    {
        <table class="table table-bordered table-condensed table-striped table-hover">
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.nombre)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.descripcion)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.fechaInicio)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.fechaFin)
                </th>
                <th>
                    Opciones
                </th>
            </tr>

            @foreach (var item in Model)
            {
                //if(item.codPlan == 0001) {
                <tr class="FilaTablasSeccionesPlanesDeMejora" onclick="clickObjetivo(@item.codPlan, '@item.nombre')">
                    <td class="TablasNombre">
                        @Html.DisplayFor(modelItem => item.nombre)
                    </td>
                    <td class="TablasDescripcion">
                        @Html.DisplayFor(modelItem => item.descripcion)
                    </td>
                    <td class="TablasFecha">
                        @Html.DisplayFor(modelItem => item.fechaInicio)
                    </td>
                    <td class="TablasFecha">
                        @Html.DisplayFor(modelItem => item.fechaFin)
                    </td>
                    <td class="TablasOpciones botonCentrado">
                        @Html.ActionLink("Editar", "Edit", new { plan = item.codPlan, title = item.nombre }, new { @class = "modal-link btn btn-primary" })
                        @*@Html.ActionLink("Details", "Details", new { /* id=item.PrimaryKey */ }) |*@
                        @Html.ActionLink("Borrar", "Delete", new { plan = item.codPlan, title = item.nombre }, new { @class = "modal-link btn btn-danger" })
                    </td>
                </tr>
                //}
            }

        </table>
    }


    @*
        Modificado por: Johan Córdoba
        Historia a la que pertenece: MOS-1.2 "agregar, modificar, borrar y consultar los objetivos de un plan de mejora"
        Cambio para que redireccione al create de objetivo
    *@

    <div class="botonCentrado">
        <p>
            @Html.ActionLink("Agregar objetivo", "Create", "Objetivos", null, new { @class = "modal-link btn btn-Nuevo" })
        </p>
    </div>

    <hr />

    <div class="accionesObjetivo">
        <h2>Acciones de mejora</h2>
        <div class="centeredText">
            <p>
                Seleccione un Objetivo
            </p>
        </div>
    </div>
</div>

@section Scripts{
    
    <script>
        clickObjetivo = function ({ id, nomb }) {
            alert(id + " nombre: " + nomb);
            $(".accionesObjetivo").load("accionesObjetivo",
                { id: id, nomb: nomb });
        };
        $(document).ready(function () {
        });
    </script>

}
