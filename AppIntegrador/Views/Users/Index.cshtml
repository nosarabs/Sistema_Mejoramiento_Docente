@model IEnumerable<AppIntegrador.Models.UsuarioPersona>

@{
    ViewBag.Title = "Index";
}

<link href="https://unpkg.com/bootstrap-table@1.15.4/dist/bootstrap-table.min.css" rel="stylesheet">

<div class="container">
    <h2>Administración de usuarios</h2>

    <p>
        @Html.ActionLink("Create New", "Create")
    </p>
    <table id="selectedColumn" class="table table-striped table-bordered table-sm" cellspacing="0" width="100%">
        <col width="50">
        <thead>
            <tr>
                <th>
                    @Html.DisplayNameFor(model => model.Persona.Identificacion)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Persona.Nombre1)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Persona.Nombre2)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Persona.Apellido1)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Persona.Apellido2)
                </th>
                <th>
                    @Html.DisplayNameFor(model => model.Usuario.Activo)
                </th>
                <th></th>
            </tr>
        </thead>

            @foreach (var item in Model)
            {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.Persona.Identificacion)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Persona.Nombre1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Persona.Nombre2)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Persona.Apellido1)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.Persona.Apellido2)
        </td>
        <td>
            @Html.EditorFor(modelItem => item.Usuario.Activo, new { htmlAttributes = new { @class = "form-control" } })
        </td>
        <td>
            @Html.ActionLink("Edit", "Edit", new
            {
                username = item.Persona.Correo.Substring(0, item.Persona.Correo.LastIndexOf('.')),
                                                   domain = item.Persona.Correo.Substring(item.Persona.Correo.LastIndexOf('.'))
            }) |
            @Html.ActionLink("Details", "Details", new
            {
                username = item.Persona.Correo.Substring(0, item.Persona.Correo.LastIndexOf('.')),
                                                   domain = item.Persona.Correo.Substring(item.Persona.Correo.LastIndexOf('.'))
            }) |
            @Html.ActionLink("Delete", "DeleteConfirmed", new
       {
           username = item.Persona.Correo.Substring(0, item.Persona.Correo.LastIndexOf('.')),
           domain = item.Persona.Correo.Substring(item.Persona.Correo.LastIndexOf('.')),
           confirmed = true
       },
       new
       {    /*User Story TAM-2.3: Show a popup window to confirm before deleting the selected user.*/
            onclick = "return confirm('¿Está seguro que desea borrar este usuario?')"
       }


)
        </td>

    </tr>
            }

    </table>
</div>
