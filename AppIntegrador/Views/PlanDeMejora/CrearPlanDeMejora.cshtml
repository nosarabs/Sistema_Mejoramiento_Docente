@*
Añadido por: Johan Córdoba
Historia a la que pertenece: MOS-25 "como usuario quiero tener una interfaz que muestre de forma clara las jerarquías entre las distintas partes del subsistema de creación de planes de mejora"
Nueva vista adaptada a las solicitudes del PO donde se muestra la jerarquía en la creación de un plan de mejora
*@


@model AppIntegrador.Models.Metadata.PlanDeMejoraMetadata

@{
    ViewBag.Title = "CrearPlanDeMejora";
    ViewBag.idPlan = 1;
    ViewBag.creado = 0;
}
<div class="fullWidth">
    <h2>Crear Plan de mejora</h2>

    <div class="planDiv">

        <form role="form" id="newPlan" action="CrearPlanDeMejora" method="post" name="theForm">
            @using (Html.BeginForm())
            {
                @Html.AntiForgeryToken()
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })

                <div class="form-group">
                    <div class="row">
                        <div class="col-md-8">
                            @Html.LabelFor(model => model.nombre, "Nombre")
                            <div class="row">
                                <div class="col-md-10">
                                    @Html.EditorFor(model => model.nombre, new { htmlAttributes = new { @class = "form-control", @onkeyup = "nombreDelPlan()", placeholder = "Máximo 50 caracteres", maxlength = "50" } })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.fechaInicio, "Inicio")
                            <div class="row">
                                <div class="col-md-12">
                                    @Html.EditorFor(model => model.fechaInicio, new { htmlAttributes = new { @class = "form-control", @oninput = "inicio()" } })
                                </div>
                            </div>
                        </div>
                        <div class="col-md-2">
                            @Html.LabelFor(model => model.fechaFin, "Fin")
                            <div class="row">
                                <div class="col-md-12">
                                    @Html.EditorFor(model => model.fechaFin, new { htmlAttributes = new { @class = "form-control", @oninput = "fina()" } })
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="form-group">
                    <div class="row">
                        <div class="botonCentrado">
                            <input type="submit" id="send" value="Crear Plan de Mejora" class="btn btn-success" onClick="enviar()" />
                        </div>
                    </div>
                </div>
              }
        </form>
    </div>

    <div id="searchResults">

    </div>
    <div class="planDiv">
        <h2>Crear Objetivos</h2>
        @Html.ActionLink("Nuevo Objetivo", "Create", "Objetivos", new { id = ViewBag.idPlan }, new { @class = "modal-link btn btn-Nuevo" })
    </div>
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

    <script>
        enviar = function () {
            alert("hi");
            //document.theForm.submit();
            $('#searchResults').load(document.theForm.submit());
        }
    </script>
}
